<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>REPROCANN – Cotejo visual CSV vs Imagen</title>

<style>
  body {
    margin: 0;
    background: #444;
  }

  .page {
    position: relative;
    width: 794px;
    height: 1123px;
    margin: 20px auto;
    background: #fff;
    overflow: hidden;
  }

  /* Imagen de fondo (PDF rasterizado) */
  .pdf-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 794px;
    height: 1123px;
    z-index: 1;
  }

  /* Campos de texto */
  .field {
    position: absolute;
    border: 1px solid red;
    box-sizing: border-box;
    font-size: 9px;
    color: red;
    z-index: 10;
    pointer-events: none;
    overflow: hidden;
    background: rgba(255,255,255,0.05);
  }

  /* Líneas de firma */
  .firma {
    position: absolute;
    height: 1px;
    background: blue;
    z-index: 10;
    pointer-events: none;
  }

  .label {
    position: absolute;
    top: -10px;
    left: 0;
    font-size: 8px;
    color: blue;
    white-space: nowrap;
  }
</style>
</head>

<body>

<div class="page" id="page">
  <!-- Imagen de fondo -->
  <img src="recann-pagina-1.png" class="pdf-bg" alt="">
</div>

<script>
/* =====================================================
   CSV COMPLETO (INCLUYE CAMPOS Y FIRMAS)
   ===================================================== */

const csv = `
id,tipo_detectado,x_pdf,y_pdf,ancho_pdf,alto_pdf,nombre_final
C033,campo_texto,147.9867,184.3093,377.9662,6.6658,domicilio
C032,campo_texto,147.9867,197.6408,141.9873,6.3325,localidad
C031,campo_texto,370.9668,197.6408,154.9861,6.3325,provincia
C030,campo_texto,147.9867,210.6391,377.9662,6.3325,codigo_postal
C029,campo_texto,187.6499,236.6358,102.3242,6.3325,telefono_particular
C028,campo_texto,370.9668,236.6358,154.9861,6.3325,telefono_celular
C027,campo_texto,147.9867,249.9673,377.9662,6.3325,email
C026,campo_texto,147.9867,262.9656,377.9662,6.3325,obra_social

C025,campo_texto,147.9867,328.2904,141.9873,6.3325,tutor_apellido_nombre
C024,campo_texto,357.9680,328.2904,76.9931,6.3325,tutor_tipo_doc
C023,campo_texto,502.2884,328.2904,22.9979,6.3325,tutor_nro_doc
C022,campo_texto,108.9902,341.2887,154.9861,6.3325,tutor_fecha_nac
C021,campo_texto,318.3048,341.2887,62.9944,6.3325,tutor_domicilio
C020,campo_texto,422.9621,341.2887,50.6621,6.3325,tutor_localidad
C019,campo_texto,501.9551,341.2887,23.6645,6.3325,tutor_provincia
C018,campo_texto,252.9773,354.2870,272.9756,6.6658,tutor_codigo_postal
C017,campo_texto,187.6499,367.2854,102.3242,6.6658,tutor_vinculo
C016,campo_texto,370.9668,367.2854,154.9861,6.6658,registro_familiares

C015,campo_texto,147.9867,380.6169,377.9662,6.3325,medico_apellido_nombre
C014,campo_texto,147.9867,393.6152,377.9662,6.6658,medico_matricula
C012,campo_texto,147.9867,472.2716,233.6457,6.3325,medico_telefono
C011,campo_texto,448.9598,472.2716,76.9931,6.3325,medico_email

C010,campo_texto,147.9867,485.2699,115.9896,6.3325,resumen_historia_clinica
C009,campo_texto,317.9715,485.2699,207.3148,6.3325,diagnostico
C008,campo_texto,187.6499,498.2682,102.3242,6.6658,patologias_asociadas
C007,campo_texto,370.9668,498.2682,154.9861,6.6658,tratamiento
C006,campo_texto,187.6499,511.2665,338.3030,6.6658,justificacion_cambio
C005,campo_texto,172.6512,524.5981,353.3017,6.3325,producto_indicado

F008,linea_firma,69.6604,542.5958,456.2925,1,firma_8
F007,linea_firma,69.6604,555.2608,456.2925,1,firma_7
F006,linea_firma,145.6536,581.5907,380.2993,1,firma_6
F005,linea_firma,78.3263,703.2415,123.3223,1,firma_5
F004,linea_firma,234.6457,703.2415,123.3223,1,firma_4
F003,linea_firma,393.2981,703.2415,123.6556,1,firma_3
F002,linea_firma,56.6616,792.5631,165.6518,1,firma_2
F001,linea_firma,374.9664,792.5631,163.9853,1,firma_1
`;

/* =====================================================
   Render de cotejo
   ===================================================== */

const page = document.getElementById("page");
const rows = csv.trim().split("\n").slice(1);

rows.forEach(r => {
  const c = r.split(",");
  const tipo = c[1];
  const x = c[2];
  const y = c[3];
  const w = c[4];
  const h = c[5];
  const nombre = c[6];

  if (tipo === "campo_texto") {
    const d = document.createElement("div");
    d.className = "field";
    d.style.left = x + "pt";
    d.style.top = y + "pt";
    d.style.width = w + "pt";
    d.style.height = h + "pt";
    d.textContent = nombre;
    page.appendChild(d);
  }

  if (tipo === "linea_firma") {
    const l = document.createElement("div");
    l.className = "firma";
    l.style.left = x + "pt";
    l.style.top = y + "pt";
    l.style.width = w + "pt";

    const label = document.createElement("div");
    label.className = "label";
    label.textContent = nombre;
    l.appendChild(label);

    page.appendChild(l);
  }
});
</script>

</body>
</html>